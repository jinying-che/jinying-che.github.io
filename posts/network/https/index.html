<!doctype html><html lang=en><head><title>HTTPS :: Terminal</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="HTTPS Overivew"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://jinying-che.github.io/posts/network/https/><link rel=stylesheet href=https://jinying-che.github.io/styles.css><link rel="shortcut icon" href=https://jinying-che.github.io/img/theme-colors/green.png><link rel=apple-touch-icon href=https://jinying-che.github.io/img/theme-colors/green.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="HTTPS"><meta property="og:description" content="HTTPS Overivew"><meta property="og:url" content="https://jinying-che.github.io/posts/network/https/"><meta property="og:site_name" content="Terminal"><meta property="og:image" content="https://jinying-che.github.io/img/favicon/green.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2023-09-21 11:19:47 +0800 +0800"></head><body class=green><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>jinying-che:~#</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/posts>Home</a></li><li><a href=/tags>Tags</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/posts>Home</a></li><li><a href=/tags>Tags</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://jinying-che.github.io/posts/network/https/>HTTPS</a></h1><div class=post-meta><time class=post-date>2023-09-21 ::</time></div><span class=post-tags>#<a href=https://jinying-che.github.io/tags/network/>network</a>&nbsp;
#<a href=https://jinying-che.github.io/tags/protocol/>protocol</a>&nbsp;
#<a href=https://jinying-che.github.io/tags/http/>http</a>&nbsp;</span><div class=post-content><div><h2 id=tldr>TL;DR<a href=#tldr class=hanchor arialabel=Anchor>&#8983;</a></h2><p><strong>HTTPS = HTTP Over TLS</strong>, when we talk about HTTPS, we actually talk about the TLS more specifically.</p><h2 id=handshake>Handshake<a href=#handshake class=hanchor arialabel=Anchor>&#8983;</a></h2><p>The exact steps within a TLS handshake will vary depending upon the kind of key exchange algorithm used and the cipher suites supported by both sides. The RSA key exchange algorithm, while now considered not secure, was used in versions of TLS before 1.3.</p><h4 id=handshake-tls-12>Handshake TLS 1.2<a href=#handshake-tls-12 class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Basically it&rsquo;s a <em>3-Way TCP handshake</em> + <em>4 Way TLS handshake</em>.
<img src=/images/https_handshake.png alt="https handshake"></p><pre tabindex=0><code>      Client                                             Server
      
      -------------------- TCP 3-Way Handshke -----------------
      
      SYNC
                                                     SYNC + ACK
      
      ACK

      -------------------- TLS 4-Way Handshake  ---------------

      ClientHello                --------&gt;
                                                    ServerHello
                                                   Certificate*
                                             ServerKeyExchange*
                                            CertificateRequest*
                                 &lt;--------      ServerHelloDone
      Certificate*
      ClientKeyExchange
      CertificateVerify*
      [ChangeCipherSpec]
      Finished                   --------&gt;
                                             [ChangeCipherSpec]
                                 &lt;--------             Finished

      Application Data           &lt;-------&gt;     Application Data
</code></pre><p>Understand the classic handshake in 4 general steps:</p><ol><li>TCP Handshake</li><li>Certificate Check (<strong>TCP</strong>: client says hello, server says hello)</li><li>Key Exchange (<strong>Asymmetric Encryption</strong>)
Basically there&rsquo;re two way for key exchange, the key point is how to generate the <strong>premaster secret</strong> which is used to generate master secret which is used for data transmission eventually:<ol><li>client generates the premaster secret key, encrypts by the public key, send to server (RSA algorithm)</li><li>client and server generate the same premaster secret seperately using client and server params (ECDHE algorithm )</li></ol></li><li>Data Transmission (<strong>Symmetric Encryption</strong>)</li></ol><h4 id=handshake-tls-13>Handshake TLS 1.3<a href=#handshake-tls-13 class=hanchor arialabel=Anchor>&#8983;</a></h4><p>TBD</p><h2 id=man-in-the-middle-attacker>Man-In-The-Middle Attacker<a href=#man-in-the-middle-attacker class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Assume there&rsquo;s an attacker who can detect the info during the TLS handshake, trying to defend the attacker is a better way to understand the HTTPS design more throughly.</p><ol><li>Attacker is disguised as server? Use <strong>Certificate Authority (CA)</strong> to validate the server</li><li>Attacker steal the transmission key (master secret)? Use <strong>Asymmetric Encryption (one way encryption)</strong>, even if attacker get the public key, still he&rsquo;s not able to know what client sends to server (e.g. premaster secret) as only the private key can decrypt</li><li>Attacker get the leaked private key? Use ECDHE algoritm to generate the premaster secret instead of passing from client to server.</li></ol><h2 id=ssl-vs-tls>SSL vs TLS<a href=#ssl-vs-tls class=hanchor arialabel=Anchor>&#8983;</a></h2><p>SSL(Secure Sockets Layer) was the original security protocol developed for HTTP. SSL was replaced by TLS(Transport Layer Security) some time ago. SSL handshakes are now called TLS handshakes, although the &ldquo;SSL&rdquo; name is still in wide use.</p><blockquote><p>SSL v3.1 = TLS v1.0</p></blockquote><h2 id=referrence>Referrence<a href=#referrence class=hanchor arialabel=Anchor>&#8983;</a></h2><ul><li><a href=https://blog.bytebytego.com/p/how-does-https-work-episode-6>https://blog.bytebytego.com/p/how-does-https-work-episode-6</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc5246>RFC5246: TLS1.2</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc8446>RFC8446: TLS1.3</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc2818>RFC2818: HTTPS</a></li></ul></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://jinying-che.github.io/posts/network/dns/><span class=button__text>DNS</span>
<span class=button__icon>→</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2023 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>