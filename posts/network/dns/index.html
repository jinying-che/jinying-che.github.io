<!doctype html><html lang=en><head><title>DNS ::</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="DNS Overview"><meta name=keywords content="computer,ai,network"><meta name=robots content="noodp"><link rel=canonical href=https://chejinying.com/tech/posts/network/dns/><link rel=stylesheet href=https://chejinying.com/tech/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css><link rel=stylesheet href=https://chejinying.com/tech/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css><link rel=stylesheet href=https://chejinying.com/tech/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css><link rel=stylesheet href=https://chejinying.com/tech/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css><link rel=stylesheet href=https://chejinying.com/tech/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css><link rel=stylesheet href=https://chejinying.com/tech/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css><link rel=stylesheet href=https://chejinying.com/tech/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css><link rel=stylesheet href=https://chejinying.com/tech/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css><link rel=stylesheet href=https://chejinying.com/tech/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css><link rel=stylesheet href=https://chejinying.com/tech/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css><link rel=stylesheet href=https://chejinying.com/tech/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css><link rel=stylesheet href=https://chejinying.com/tech/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css><link rel=stylesheet href=https://chejinying.com/tech/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css><link rel=stylesheet href=https://chejinying.com/tech/terminal.css><link rel="shortcut icon" href=https://chejinying.com/tech/favicon.png><link rel=apple-touch-icon href=https://chejinying.com/tech/apple-touch-icon.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="DNS"><meta property="og:description" content="DNS Overview"><meta property="og:url" content="https://chejinying.com/tech/posts/network/dns/"><meta property="og:site_name" content><meta property="og:image" content="https://chejinying.com/tech/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2023-09-20 11:47:31 +0800 +0800"></head><body><div class="container center"><header class=header><div class=header__inner><div class=header__logo><a href=https://chejinying.com/tech/><div class=logo>jinying-che:~#</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=https://chejinying.com/tech/posts>Home</a></li><li><a href=https://chejinying.com/tech/tags>Tags</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=https://chejinying.com/tech/posts>Home</a></li><li><a href=https://chejinying.com/tech/tags>Tags</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://chejinying.com/tech/posts/network/dns/>DNS</a></h1><div class=post-meta><time class=post-date>2023-09-20</time></div><span class=post-tags>#<a href=https://chejinying.com/tech/tags/network/>network</a>&nbsp;</span><div class=post-content><div><p><a href=https://en.wikipedia.org/wiki/Domain_Name_System>Domain Name System (DNS)</a> is the phonebook of the Internet. It translates human-readable domain names (google.com) to machine-readable IP addresses (142.251.46.238).</p><p>DNS is not very complex but super useful.</p><h2 id=how-does-dns-work>How does DNS work?<a href=#how-does-dns-work class=hanchor arialabel=Anchor>#</a></h2><p><img src=https://chejinying.com/tech/images/dns_architecture.svg alt="dns architecutre"></p><p><img src=https://chejinying.com/tech/images/dns_flow.png alt="dns flow"></p><p>The basic flow to query dns level by level as follows, the previous server stores the next server address, e.g. Root Nameserver stores TLD Nameserver addresss.</p><ol><li><strong>Brower cache and OS cache</strong></li><li><strong>DNS Resolver</strong>: is responsible for initiating and sequencing the queries that ultimately lead to a full resolution (translation) of the resource sought. DNS resolvers are classified by a variety of query methods, such as <strong>recursive</strong>, <strong>non-recursive</strong>, and <strong>iterative</strong>. A resolution process may use a combination of these methods.</li><li><strong>Root Nameserver</strong>: the first step in translating (resolving) human readable host names into IP addresses. It stores the IP addresses of TLD, There are <strong>13</strong> logical Root Nameserver globally, e.g.<div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>- l.root-servers.net.
</span></span><span class=line><span class=cl>- m.root-servers.net.
</span></span><span class=line><span class=cl>- a.root-servers.net.
</span></span><span class=line><span class=cl>- b.root-servers.net.
</span></span><span class=line><span class=cl>- c.root-servers.net.
</span></span><span class=line><span class=cl>- d.root-servers.net.
</span></span><span class=line><span class=cl>- e.root-servers.net.
</span></span><span class=line><span class=cl>- f.root-servers.net.
</span></span><span class=line><span class=cl>- g.root-servers.net.
</span></span><span class=line><span class=cl>- h.root-servers.net.
</span></span><span class=line><span class=cl>- i.root-servers.net.
</span></span><span class=line><span class=cl>- j.root-servers.net.
</span></span><span class=line><span class=cl>- k.root-servers.net.
</span></span></code></pre></div></li><li><strong>TLD Nameserver</strong> (Top Level Domain Server): It stores the IP addresses of authoritative name servers, e.g.<div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>- .com
</span></span><span class=line><span class=cl>- .org
</span></span><span class=line><span class=cl>- .edu
</span></span><span class=line><span class=cl>- .net
</span></span><span class=line><span class=cl>- .us
</span></span><span class=line><span class=cl>- .cn
</span></span><span class=line><span class=cl>- ...
</span></span></code></pre></div></li><li><strong>Authoritative Nameserver</strong>: it provides the actual anwser for the dns request.</li></ol><h3 id=example>Example<a href=#example class=hanchor arialabel=Anchor>#</a></h3><p>Let&rsquo;s try to trace the dns request for <code>jinying-che.github.io</code> from my local laptop:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>➜  ~ dig +trace jinying-che.github.io
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>;</span> &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; +trace jinying-che.github.io
</span></span><span class=line><span class=cl><span class=p>;;</span> global options: +cmd
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      l.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      m.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      a.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      b.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      c.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      d.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      e.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      f.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      g.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      h.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      i.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      j.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      NS      k.root-servers.net.
</span></span><span class=line><span class=cl>.                       <span class=m>467805</span>  IN      RRSIG   NS <span class=m>8</span> <span class=m>0</span> <span class=m>518400</span> <span class=m>20231002140000</span> <span class=m>20230919130000</span> <span class=m>11019</span> . hSoNzesJLtJnf9gXYqG4SMrn8R78uNEqUgc1xcFKglavg16gnPrvQnuP sLb74PkmHE+uqQ1ZPs31X6XrA8E/yhlF8r4kPQAaEiMhkLXsZ1QPLgfj wHFWsFcVmWZTKJIQO/6H7P6ht0jhX0pLVRVRTZtIPH0uYqz6w9Z8vWuw Haaqm+48d5+cuyn2iNNqxO8omlQLALwaALu6/7hZPQfgkH6+XBPvSagj 6FOV+zun2hwKNCwrJ7elYQCfL7xi0UbjAOt+OOJYJfF9vfJq9qYnt8/O IBrfdRHtsryH/Fmk/wUPhgNEMYLwgz4n1z+a25A7q5ofocId5lsDYAUJ <span class=nv>YxLSNA</span><span class=o>==</span>
</span></span><span class=line><span class=cl><span class=p>;;</span> Received <span class=m>1097</span> bytes from 192.168.0.1#53<span class=o>(</span>192.168.0.1<span class=o>)</span> in <span class=m>11</span> ms
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>io.                     <span class=m>172800</span>  IN      NS      a2.nic.io.
</span></span><span class=line><span class=cl>io.                     <span class=m>172800</span>  IN      NS      c0.nic.io.
</span></span><span class=line><span class=cl>io.                     <span class=m>172800</span>  IN      NS      a0.nic.io.
</span></span><span class=line><span class=cl>io.                     <span class=m>172800</span>  IN      NS      b0.nic.io.
</span></span><span class=line><span class=cl>io.                     <span class=m>86400</span>   IN      DS      <span class=m>57355</span> <span class=m>8</span> <span class=m>2</span> 95A57C3BAB7849DBCDDF7C72ADA71A88146B141110318CA5BE672057 E865C3E2
</span></span><span class=line><span class=cl>io.                     <span class=m>86400</span>   IN      RRSIG   DS <span class=m>8</span> <span class=m>1</span> <span class=m>86400</span> <span class=m>20231003050000</span> <span class=m>20230920040000</span> <span class=m>11019</span> . TnYR1fL2pnUlBTTsJleHjjmxjLs96HwMJOtcHvTzwK31ZBoT+sp76dHq bsQfFgX7FqyTjIzF+z/W7dK1wKnO1ONvhbeWCTZO8SAIMaJU4ZyPAAMo D+xM7YpRHrAYES2wi+cX20kDDKUXauhxiesHqywSMdNK6XugyLluSaz1 J5c2Y0S2r7pZwEPV5v6w9TjzNQOfcfu0NLQx1i7JAbuLExGc7/7pjqxY XB2LH9FtyzgfAkm0ovTu5BRzbUxO/lSURlGIPsI05aFVz6HEhnl04Ujb dmir+S3ffOahHgxjD2al8yIx/FS67ZCi+va2pA6lHdHsktrNnTn2tGZt <span class=nv>aUJrzg</span><span class=o>==</span>
</span></span><span class=line><span class=cl><span class=p>;;</span> Received <span class=m>637</span> bytes from 192.112.36.4#53<span class=o>(</span>g.root-servers.net<span class=o>)</span> in <span class=m>85</span> ms
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>github.io.              <span class=m>3600</span>    IN      NS      dns2.p05.nsone.net.
</span></span><span class=line><span class=cl>github.io.              <span class=m>3600</span>    IN      NS      ns-1622.awsdns-10.co.uk.
</span></span><span class=line><span class=cl>github.io.              <span class=m>3600</span>    IN      NS      dns3.p05.nsone.net.
</span></span><span class=line><span class=cl>github.io.              <span class=m>3600</span>    IN      NS      dns1.p05.nsone.net.
</span></span><span class=line><span class=cl>github.io.              <span class=m>3600</span>    IN      NS      ns-692.awsdns-22.net.
</span></span><span class=line><span class=cl>0d790076pp5pfktg2hrthj5bj6ckckcb.io. <span class=m>3600</span> IN NSEC3 <span class=m>1</span> <span class=m>1</span> <span class=m>10</span> 332539EE7F95C32A 0D7N522D3BFMA1LA01BUIOBUK6MROGMU  NS SOA RRSIG DNSKEY NSEC3PARAM
</span></span><span class=line><span class=cl>0d790076pp5pfktg2hrthj5bj6ckckcb.io. <span class=m>3600</span> IN RRSIG NSEC3 <span class=m>8</span> <span class=m>2</span> <span class=m>3600</span> <span class=m>20231011082044</span> <span class=m>20230920072044</span> <span class=m>32553</span> io. hg8Fr2R0FnIfikGso1mx3B66B9QtVVcMoOL108Ahw5D7TUTo/AL+vpP9 AFEa5GMnkenQqbWsp5/xgEuhJxeMbbzF88roBy6hnSoLq21qysLpIQuC Q+TprenA+f7dKiza7RLTTPnv6qN1b50Z/VSsowMK6Fw353h2WLOUAg0G <span class=nv>2I4</span><span class=o>=</span>
</span></span><span class=line><span class=cl>0jehpe7obc68rhh4ntet0u9o44qmosmo.io. <span class=m>3600</span> IN NSEC3 <span class=m>1</span> <span class=m>1</span> <span class=m>10</span> 332539EE7F95C32A 0JES1F5OD9SG1E4CCRGBS865PMBUV4PC  NS DS RRSIG
</span></span><span class=line><span class=cl>0jehpe7obc68rhh4ntet0u9o44qmosmo.io. <span class=m>3600</span> IN RRSIG NSEC3 <span class=m>8</span> <span class=m>2</span> <span class=m>3600</span> <span class=m>20231008005435</span> <span class=m>20230916235435</span> <span class=m>32553</span> io. b6iUJ3A5Govhm/HVZIU7ygw7l8tHsUnDFCZaR50HDmYtbmi/g83PASgw 4IgNm42FI2u8oX3HZ2ce8gBK48ts/1bbSCxthUqO2KrSlou+Okh7z+J1 TAeRsC8FkkA/RHu+ymFM1g0BB2cv23Rnftwtl9jsD4JoDKSzhVcKiOx9 <span class=nv>WIA</span><span class=o>=</span>
</span></span><span class=line><span class=cl><span class=p>;;</span> Received <span class=m>687</span> bytes from 65.22.160.17#53<span class=o>(</span>a0.nic.io<span class=o>)</span> in <span class=m>7</span> ms
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>jinying-che.github.io.  <span class=m>3600</span>    IN      A       185.199.108.153
</span></span><span class=line><span class=cl>jinying-che.github.io.  <span class=m>3600</span>    IN      A       185.199.109.153
</span></span><span class=line><span class=cl>jinying-che.github.io.  <span class=m>3600</span>    IN      A       185.199.110.153
</span></span><span class=line><span class=cl>jinying-che.github.io.  <span class=m>3600</span>    IN      A       185.199.111.153
</span></span><span class=line><span class=cl><span class=p>;;</span> Received <span class=m>114</span> bytes from 198.51.44.5#53<span class=o>(</span>dns1.p05.nsone.net<span class=o>)</span> in <span class=m>168</span> ms
</span></span></code></pre></div><ol><li>Get NS Record: 13 Root Nameservers from <code>192.168.0.1</code>(DNS Resolver) which is configured by <code>/etc/resolv.conf</code></li><li>Get NS Record: TLD (Top Level Domain) from one of Root Nameserve <code>g.root-servers.net</code></li><li>Get NS Record: Authoritative Nameserver from one of TLD <code>a0.nic.io</code></li><li>Get A Record: Actual ip address from one of Authoritative Nameserver <code>dns1.p05.nsone.net</code></li></ol><p><strong>TXT Record</strong>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># example</span>
</span></span><span class=line><span class=cl>host.widgets.com.   IN   TXT   <span class=s2>&#34;printer=lpr5&#34;</span>
</span></span><span class=line><span class=cl>sam.widgets.com.    IN   TXT   <span class=s2>&#34;favorite drink=orange juice&#34;</span>
</span></span></code></pre></div><h2 id=dns-record>DNS Record<a href=#dns-record class=hanchor arialabel=Anchor>#</a></h2><p>There&rsquo;re a lot of <a href=https://en.wikipedia.org/wiki/List_of_DNS_record_types>DNS Record types</a>, the follows are the common record from the client perspective:</p><table><thead><tr><th>Record</th><th>Function</th></tr></thead><tbody><tr><td>A</td><td>Address record: Returns a 32-bit IPv4 address</td></tr><tr><td>AAAA</td><td>IPv6 address record: Returns a 128-bit IPv6 address</td></tr><tr><td>NS</td><td>Name server record: Delegates a DNS zone to use the given authoritative name servers</td></tr><tr><td>CNAME</td><td>Canonical name record: Alias of one name to another: the DNS lookup will continue by retrying the lookup with the new name</td></tr><tr><td>TXT</td><td>arbitrary text: two of the most important uses for DNS TXT records are email spam prevention and domain ownership verification</td></tr></tbody></table><h2 id=configuration>Configuration<a href=#configuration class=hanchor arialabel=Anchor>#</a></h2><p>There&rsquo;re two way to query the ip address by domain, typically whenever a system needs to resolve a name, it first checks the <code>/etc/hosts</code> file. If no entry matched, it sends a query to the configured DNS server (by <code>/etc/resolv.conf</code>).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># /etc/resolv.conf defines the namesever address</span>
</span></span><span class=line><span class=cl>$ cat /etc/resolv.conf
</span></span><span class=line><span class=cl>nameserver 114.114.114.114
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># /etc/hosts defines the domain and ip address pair directly</span>
</span></span><span class=line><span class=cl>$ cat /etc/hosts
</span></span><span class=line><span class=cl>127.0.0.1 localhost      
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># The order in which (/etc/hosts and /etc/resolv.conf) file is checked </span>
</span></span><span class=line><span class=cl><span class=c1># is defined in the /etc/nsswitch.conf file</span>
</span></span><span class=line><span class=cl>cat /etc/nsswitch.conf <span class=p>|</span> grep host 
</span></span><span class=line><span class=cl>hosts:          files dns
</span></span></code></pre></div><h2 id=protocol>Protocol<a href=#protocol class=hanchor arialabel=Anchor>#</a></h2><p>DNS originally used the <code>UDP</code> as transport over IP. Reliability, security, and privacy concerns spawned the use of the <code>TCP</code> as well as numerous other protocol developments.</p><h2 id=referrence>Referrence<a href=#referrence class=hanchor arialabel=Anchor>#</a></h2><ul><li><a href=https://www.cloudflare.com/learning/dns/what-is-dns/>https://www.cloudflare.com/learning/dns/what-is-dns/</a></li><li><a href=https://en.wikipedia.org/wiki/Domain_Name_System>https://en.wikipedia.org/wiki/Domain_Name_System</a></li><li><a href=https://blog.bytebytego.com/p/how-does-the-domain-name-system-dns>https://blog.bytebytego.com/p/how-does-the-domain-name-system-dns</a></li><li><a href=https://draveness.me/dns-coredns/>https://draveness.me/dns-coredns/</a></li><li><a href=https://draveness.me/whys-the-design-dns-udp-tcp/>https://draveness.me/whys-the-design-dns-udp-tcp/</a></li><li><a href=https://time.geekbang.org/column/article/81850>https://time.geekbang.org/column/article/81850</a></li><li><a href=https://datatracker.ietf.org/doc/html/rfc1035>RFC 1035</a></li><li><a href=https://en.wikipedia.org/wiki/List_of_DNS_record_types>DNS Record Names</a></li><li><a href=https://www.computernetworkingnotes.com/linux-tutorials/the-etc-hosts-etc-resolv-conf-and-etc-nsswitch-conf-files.html>/etc/hosts vs /etc/resolv.conf vs etc/nsswitch.conf</a></li></ul></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><a href=https://chejinying.com/tech/posts/memory/ class="button inline prev">&lt; [<span class=button__text>Memory</span>]
</a>::
<a href=https://chejinying.com/tech/posts/sla_vs_slo_vs_sli/ class="button inline next">[<span class=button__text>SLA vs SLO vs SLI</span>] ></a></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=https://chejinying.com/tech/bundle.min.js></script></div></body></html>