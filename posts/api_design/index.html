<!doctype html><html lang=en><head><title>API Design :: Terminal</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Some ideas you should know when talking about API Design"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://jinying-che.github.io/posts/api_design/><link rel=stylesheet href=https://jinying-che.github.io/styles.css><link rel="shortcut icon" href=https://jinying-che.github.io/img/theme-colors/green.png><link rel=apple-touch-icon href=https://jinying-che.github.io/img/theme-colors/green.png><meta name=twitter:card content="summary"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="API Design"><meta property="og:description" content="Some ideas you should know when talking about API Design"><meta property="og:url" content="https://jinying-che.github.io/posts/api_design/"><meta property="og:site_name" content="Terminal"><meta property="og:image" content="https://jinying-che.github.io/img/favicon/green.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2023-02-13 22:27:32 +0800 +0800"></head><body class=green><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>jinying-che:~#</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/posts>Home</a></li><li><a href=/tags>Tags</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/posts>Home</a></li><li><a href=/tags>Tags</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://jinying-che.github.io/posts/api_design/>API Design</a></h1><div class=post-meta><time class=post-date>2023-02-13 ::</time></div><span class=post-tags>#<a href=https://jinying-che.github.io/tags/api/>api</a>&nbsp;
#<a href=https://jinying-che.github.io/tags/design/>design</a>&nbsp;</span><div class=post-content><div><p>There are some similar technologies as Rest, OpenAPI, gRPC and GraphQL which are popular design or standard or framework that related to API design, meanwhile, they are prone to make people confused for the use case.</p><p>Simple Put:</p><ul><li><code>REST</code> is a software <strong>architectural</strong> and common communication <strong>standard</strong>.</li><li><code>OpenAPI</code> is a <strong>specification</strong>, which defines a standard, programming language-agnostic interface description for HTTP APIs.</li><li><code>gRPC</code> is a high performance Remote Procedure Call (RPC) <strong>framework</strong>.</li><li><code>GraphQL</code> is a <strong>query language</strong> for your API.</li></ul><h2 id=1-rest>1. Rest<a href=#1-rest class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Representational state transfer (REST) is a software architectural style that describes a uniform interface between physically separate components, often across the Internet in a client-server architecture.</p><p>REST is the most common communication standard between computers over the internet, an API that follows the REST standard is called a RESTful API.</p><h3 id=11-architectural-constraints>1.1 Architectural Constraints<a href=#11-architectural-constraints class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>Client–server architecture</li><li>Statelessness</li><li>Cacheability</li><li>Layered system</li><li>Code on demand (optional)</li><li>Uniform interface</li></ul><blockquote><p>refer to <a href=https://en.wikipedia.org/wiki/Representational_state_transfer#Architectural_constraints>wikipedia</a> for more details</p></blockquote><h3 id=12-applied-to-web-services>1.2 Applied to web services<a href=#12-applied-to-web-services class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>a base URI, such as <a href=http://api.example.com/>http://api.example.com/</a></li><li>standard HTTP methods (e.g., GET, POST, PUT, and DELETE)</li><li>a media type that defines state transition data elements</li></ul><h3 id=13-crud>1.3 CRUD<a href=#13-crud class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>POST &ndash;> CREATE <em>(non-idempotent)</em></li><li>GET &ndash;> READ <em>(idempotent)</em></li><li>PUT &ndash;> UPDATE <em>(idempotent)</em></li><li>DELETE &ndash;> DELETE <em>(idempotent)</em></li></ul><h3 id=14-version>1.4 Version<a href=#14-version class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Versioning allows an implementation to provide backward compatibility so that if we introduce breaking changes from one version to another, consumers get enough time to move to the next version.</p><p>There are many ways to version an API. The most straightforward is to prefix the version before the resource on the URI. For instance:</p><ul><li><a href=https://shopee.com/v1/products>https://shopee.com/v1/products</a></li><li><a href=https://shopee.com/v2/products>https://shopee.com/v2/products</a></li></ul><h3 id=15-example>1.5 Example<a href=#15-example class=hanchor arialabel=Anchor>&#8983;</a></h3><p>This API has four endpoints:</p><ul><li>POST <code>/users</code> Creates a new user with the specified name and email.</li><li>GET <code>/users/:id</code> Retrieves an existing user with the specified ID.</li><li>PUT <code>/users/:id</code> Updates an existing user with the specified ID.</li><li>DELETE <code>/users/:id</code> Deletes an existing user with the specified ID.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>POST /users
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;John Smith&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;email&#34;</span>: <span style=color:#e6db74>&#34;john@example.com&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>GET /users/:id
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>PUT /users/:id
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;John Smith&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;email&#34;</span>: <span style=color:#e6db74>&#34;john@example.com&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DELETE /users/:id
</span></span></code></pre></div><h2 id=2-grpc>2. gRPC<a href=#2-grpc class=hanchor arialabel=Anchor>&#8983;</a></h2><ol><li>gPRC is an implementation of Remote Procedure Call (RPC)</li><li>It is modern open source high performance RPC framework that can run in any environment.</li></ol><blockquote><p>RPC (Remote Procedure Call) is called “remote” because it enables communications between remote services when services are deployed to different servers under microservice architecture. From the user’s point of view, it acts like a local function call.</p></blockquote><h3 id=21-core-concepts>2.1 Core Concepts<a href=#21-core-concepts class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>Design service API using <a href=https://developers.google.com/protocol-buffers>protocol buffers</a> as Interface Definition Language (IDL)</li><li>protocol buffers TODO?</li><li>gRPC builds on <a href=https://www.rfc-editor.org/rfc/rfc7540>HTTP/2</a> long-lived connections for inter-service communication</li></ul><h3 id=22-overall>2.2 Overall<a href=#22-overall class=hanchor arialabel=Anchor>&#8983;</a></h3><p><img src=/images/grpc_overall.jpeg alt="gprc overall"></p><h3 id=23-quick-start>2.3 Quick Start<a href=#23-quick-start class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li><a href=https://grpc.io/docs/languages/go/quickstart/>https://grpc.io/docs/languages/go/quickstart/</a></li></ul><h2 id=3-openapi>3. OpenAPI<a href=#3-openapi class=hanchor arialabel=Anchor>&#8983;</a></h2><p>First of all, I&rsquo;d like to recommend to take an overview of some <a href=https://github.com/OAI/OpenAPI-Specification/tree/main/examples>examples</a> for OpenAPI Spec. For details, can read the <a href=https://swagger.io/docs/specification/basic-structure/>basic structure</a></p><ol><li>The OpenAPI Specification (OAS) defines an <strong>interface description</strong> for HTTP APIs</li><li>It&rsquo;s tend to be industry standard</li><li>It&rsquo;s programming language-agnostic</li><li>Both human and computers can understand and discover the capabilities of a service</li><li>It removes the guesswork in calling a service and saves the communication effort</li><li>Consumer can interact the remote service with minimal implementation logic (with the rich <a href=https://openapi.tools>OpenAPI Tools</a>)</li><li>It boost the <a href=https://swagger.io/resources/articles/adopting-an-api-first-approach/>API driven development</a></li><li>It supports Restful API</li><li>The OpenAPI doc are represented in YAML or JSON format which may be produced and served statically or <strong>generated dynamically</strong> from an application. (e.g. <a href=https://github.com/swaggo/swag>generate RESTful API documentation with Swagger 2.0 for Go</a>)</li></ol><p>Generally, we would have the best practice in API desgin as long as we follow the OAS and use the related toolset.</p><h3 id=31-what-we-can-do-with-openapi-spec>3.1 What we can do with OpenAPI Spec<a href=#31-what-we-can-do-with-openapi-spec class=hanchor arialabel=Anchor>&#8983;</a></h3><ol><li>Interactive documentation</li><li>Code generation for documentation, clients, and servers</li><li>automation of test cases</li><li>etc.</li></ol><h3 id=32-quick-start>3.2 Quick Start<a href=#32-quick-start class=hanchor arialabel=Anchor>&#8983;</a></h3><h4 id=321-api-definition>3.2.1 API Definition<a href=#321-api-definition class=hanchor arialabel=Anchor>&#8983;</a></h4><p>API is a contract followed by all stakeholders across the whole organization, traditionally, two main approaches exist when creating OpenAPI documents: Code-first and Design-first.</p><h5 id=design-first>Design First<a href=#design-first class=hanchor arialabel=Anchor>&#8983;</a></h5><p>API Design First approach is being more and more pupular to build systems today as it provides many <a href=https://swagger.io/resources/articles/adopting-an-api-first-approach/#the-benefits-of-an-api-first-approach-2>benefits</a>.</p><p>To design the API from the scratch, we can use <a href=https://swagger.io/tools/swagger-editor/>swagger editor</a> to create API in an interactive way where you can see if your changes is valid and what they would like in the real time. Personal speaking, learning by doing is the best way to understand and write OpenAPI docs, you can simply import and update the example like <code>Petstore</code> in the editor and kick off your OpenAPI journey.</p><h5 id=code-first>Code First<a href=#code-first class=hanchor arialabel=Anchor>&#8983;</a></h5><p>Code First is possibly adopted by some devs for some fast and easy API building, whereas it&rsquo;s an old school and not recommeded at all, unless you have an exist project which requires to follow the OpenAPI spec after the code has been finished already, with that saying, there are some tools like <a href=https://github.com/go-swagger/go-swagger>go-swagger</a> to generate OpenAPI documents automatically by parsing code annotations.</p><h4 id=322-code-generation>3.2.2 Code Generation<a href=#322-code-generation class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Once we got the standard OpenAPI docs from wherever it&rsquo;s generated from the code or created by any stakeholders, there are some tools for you to generate the code, for example:</p><blockquote><p><a href=https://openapi-generator.tech/>OpenAPI Generator</a> - A template-driven engine to generate documentation, API clients and server stubs in different languages by parsing your OpenAPI Description (community-driven fork of swagger-codegen)</p></blockquote><h4 id=333-mock-server-and-testing>3.3.3 Mock Server and Testing<a href=#333-mock-server-and-testing class=hanchor arialabel=Anchor>&#8983;</a></h4><p>TBD</p><h2 id=4-reference>4. Reference<a href=#4-reference class=hanchor arialabel=Anchor>&#8983;</a></h2><h4 id=rest>Rest<a href=#rest class=hanchor arialabel=Anchor>&#8983;</a></h4><ul><li><a href=https://blog.bytebytego.com/p/why-is-restful-api-so-popular>https://blog.bytebytego.com/p/why-is-restful-api-so-popular</a></li><li><a href=https://en.wikipedia.org/wiki/Representational_state_transfer>https://en.wikipedia.org/wiki/Representational_state_transfer</a></li><li><a href=https://cloud.google.com/blog/products/api-management/understanding-grpc-openapi-and-rest-and-when-to-use-them>gRPC vs REST: Understanding gRPC, OpenAPI and REST and when to use them in API design</a></li></ul><h4 id=grpc>gRPC<a href=#grpc class=hanchor arialabel=Anchor>&#8983;</a></h4><ul><li><a href=https://blog.bytebytego.com/i/84137023/how-does-grpc-work>https://blog.bytebytego.com/i/84137023/how-does-grpc-work</a></li><li><a href=https://grpc.io/blog/grpc-on-http2/>https://grpc.io/blog/grpc-on-http2/</a></li></ul><h4 id=openapi>OpenAPI<a href=#openapi class=hanchor arialabel=Anchor>&#8983;</a></h4><ul><li><a href=https://spec.openapis.org/oas/v3.1.0>https://spec.openapis.org/oas/v3.1.0</a></li><li><a href="https://www.youtube.com/watch?v=uBs6dfUgxcI">Better API Design With OpenAPI</a></li><li><a href=https://github.com/OAI/OpenAPI-Specification/>https://github.com/OAI/OpenAPI-Specification/</a></li><li><a href=https://swagger.io/resources/articles/adopting-an-api-first-approach/>https://swagger.io/resources/articles/adopting-an-api-first-approach/</a></li><li>Examples: <a href=https://github.com/OAI/OpenAPI-Specification/tree/main/examples>https://github.com/OAI/OpenAPI-Specification/tree/main/examples</a></li><li>Best Practice: <a href=https://oai.github.io/Documentation/best-practices.html>https://oai.github.io/Documentation/best-practices.html</a></li></ul></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://jinying-che.github.io/posts/algorithm/dynamic_programming/><span class=button__icon>←</span>
<span class=button__text>Dynamic Programming</span></a></span>
<span class="button next"><a href=https://jinying-che.github.io/posts/git_cheatsheet/><span class=button__text>Git Cheatsheet</span>
<span class=button__icon>→</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2023 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/panr/hugo-theme-terminal target=_blank>Theme</a> made by <a href=https://github.com/panr target=_blank>panr</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>